(this["webpackJsonpweb-edf"]=this["webpackJsonpweb-edf"]||[]).push([[0],{11:function(e,t,n){e.exports={Background:"Navbar_Background__t6HNZ",Menu:"Navbar_Menu__31JhJ",Title:"Navbar_Title__3XeUr",LeftFrameButton:"Navbar_LeftFrameButton__1eqXo",RightFrameButton:"Navbar_RightFrameButton__1Fq2i",FrameNavigationButtonGroup:"Navbar_FrameNavigationButtonGroup__3Jb6E",FileName:"Navbar_FileName__2waRy"}},14:function(e,t,n){e.exports={Background:"SignalHeader_Background__1zqVa",Center:"SignalHeader_Center__bPlrg",DragHandle:"SignalHeader_DragHandle__15Men",Label:"SignalHeader_Label__3lCgR",HighBoundLabel:"SignalHeader_HighBoundLabel__21VDD",LowBoundLabel:"SignalHeader_LowBoundLabel__iZWG4"}},16:function(e,t,n){e.exports={Background:"App_Background__14_hr",Navbar:"App_Navbar__26oD_",View:"App_View__1RCWD",SideBar:"App_SideBar__1lQ4Q"}},32:function(e,t,n){e.exports={Background:"SideBar_Background__t8yqE"}},33:function(e,t,n){e.exports={Background:"Shadow_Background__3arsa"}},38:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),s=n(13),r=n.n(s),o=(n(38),n(4)),l=n(7),c=n(9),d=n(8),g=function e(t,n,a,i,s,r,l,c,d){Object(o.a)(this,e),this.label="",this.transducerType="",this.physicalDimension=0,this.physicalMinimum=0,this.physicalMaximum=0,this.digitalMinimum=0,this.digitalMaximum=0,this.prefiltering="",this.numSamplesPerDataRecord=0,this.label=t,this.transducerType=n,this.physicalDimension=a,this.physicalMinimum=i,this.physicalMaximum=s,this.digitalMinimum=r,this.digitalMaximum=l,this.prefiltering=c,this.numSamplesPerDataRecord=d,this.maxBound=100,this.minBound=-100},h=n(16),u=n.n(h),p=n(14),x=n.n(p),B=n(17),b=n.n(B),m=n(28),f=n(1),j=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={maxBoundLast:0,minBoundLast:0,shiftLast:0},a.dragStartHandler=function(e){e.dataTransfer.setData("text",a.props.position.toString())},a.dragOver=function(e){e.preventDefault()},a.drop=function(e){e.preventDefault();var t=e.dataTransfer.getData("text");a.props.swapSignalBoxOrder(a.props.position,parseInt(t)),console.log(t)},a.zoom=function(e){e.deltaY<0?(a.props.setSignalBoxMaxBound(a.props.position,-1),a.props.setSignalBoxMinBound(a.props.position,1)):(a.props.setSignalBoxMaxBound(a.props.position,1),a.props.setSignalBoxMinBound(a.props.position,-1))},a.maxBoundChange=function(e){var t=e-a.state.maxBoundLast;t<0?a.props.setSignalBoxMaxBound(a.props.position,1):t>0&&a.props.setSignalBoxMaxBound(a.props.position,-1),a.setState({maxBoundLast:e})},a.minBoundChange=function(e){var t=e-a.state.minBoundLast;t<0?a.props.setSignalBoxMinBound(a.props.position,1):t>0&&a.props.setSignalBoxMinBound(a.props.position,-1),a.setState({minBoundLast:e})},a.shift=function(e){var t=e-a.state.shiftLast;t<0?(a.props.setSignalBoxMinBound(a.props.position,-1),a.props.setSignalBoxMaxBound(a.props.position,-1)):t>0&&(a.props.setSignalBoxMinBound(a.props.position,1),a.props.setSignalBoxMaxBound(a.props.position,1)),a.setState({shiftLast:e})},a.background=i.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.background.current.addEventListener("wheel",this.zoom)}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:x.a.Background,style:{backgroundColor:"#"+this.props.color},ref:this.background,onDragOver:this.dragOver,onDrop:this.drop,onScroll:this.onScroll,children:[Object(f.jsxs)("div",{className:x.a.Center,children:[Object(f.jsx)("div",{className:x.a.DragHandle,draggable:"true",onDragStart:this.dragStartHandler,children:Object(f.jsx)(m.a,{})}),Object(f.jsx)("div",{className:x.a.Label,children:Object(f.jsx)(b.a,{yAxis:!0,onChange:this.shift,disableReset:!0,children:this.props.signal.label})})]}),Object(f.jsx)(b.a,{yAxis:!0,onChange:this.maxBoundChange,disableReset:!0,children:Object(f.jsx)("span",{className:x.a.HighBoundLabel,children:this.props.maxBound})}),Object(f.jsxs)(b.a,{yAxis:!0,onChange:this.minBoundChange,disableReset:!0,children:[" ",Object(f.jsx)("span",{className:x.a.LowBoundLabel,children:this.props.minBound})]})]})}}]),n}(a.Component),O=n(19),v=n.n(O),S=n(15),_=n.n(S),w=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).signalBoxWidth=200,a.drawBoxes=function(){for(var e=0;e<a.props.edf.numSignals;e++){var t=a.props.signalBoxSizing,n=[],i=0;for(var s in t)i+=parseInt(t[s]);var r=0,o=0,l=void 0;for(l=0;l<e;l++)r+=parseInt(t[l]);o=r,r=2*r/i,o=2*(o+=parseInt(t[l]))/i,n.push(-1),n.push(1-r),n.push(-1),n.push(1-o),n.push(1),n.push(1-r),n.push(1),n.push(1-o);var c=a.gl.createBuffer();a.gl.bindBuffer(a.gl.ARRAY_BUFFER,c),a.gl.bufferData(a.gl.ARRAY_BUFFER,new Float32Array(n),a.gl.STATIC_DRAW),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,null),a.gl.useProgram(a.shaderProgram),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,c);var d=a.gl.getAttribLocation(a.shaderProgram,"coordinates"),g=a.gl.getUniformLocation(a.shaderProgram,"u_color");a.gl.uniform4f(g,1-e/a.props.edf.numSignals,1-e/a.props.edf.numSignals/2,.5,1),a.gl.vertexAttribPointer(d,2,a.gl.FLOAT,!1,0,0),a.gl.enableVertexAttribArray(d),a.gl.drawArrays(a.gl.TRIANGLE_STRIP,0,4)}},a.drawLines=function(){for(var e=0;e<a.props.edf.numSignals;e++){var t=a.props.signalBoxSizing,n=0;for(var i in t)n+=parseInt(t[i]);var s=0,r=0,o=void 0;for(o=0;o<e;o++)s+=parseInt(t[o]);r=s,s=2*s/n,r=2*(r+=parseInt(t[o]))/n;for(var l=a.props.edf.signals[a.props.signalBoxOrder[e]].numSamplesPerDataRecord,c=[],d=Math.abs(r-s),g=a.props.signalBoxMaxBound[a.props.signalBoxOrder[e]],h=d/(g-a.props.signalBoxMinBound[a.props.signalBoxOrder[e]]),u=1-s-g*h,p=0;p<l;p++)c.push(p/l*2-1),c.push(a.props.dataRecords.records[e].samples[p]*h+u);var x=a.gl.createBuffer();a.gl.bindBuffer(a.gl.ARRAY_BUFFER,x),a.gl.bufferData(a.gl.ARRAY_BUFFER,new Float32Array(c),a.gl.STATIC_DRAW),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,null),a.gl.useProgram(a.shaderProgram),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,x);var B=a.gl.getAttribLocation(a.shaderProgram,"coordinates"),b=a.gl.getUniformLocation(a.shaderProgram,"u_color");a.gl.uniform4f(b,.35,.35,.35,1),a.gl.vertexAttribPointer(B,2,a.gl.FLOAT,!1,0,0),a.gl.enableVertexAttribArray(B),a.gl.drawArrays(a.gl.LINE_STRIP,0,l)}},a.drawFrame=function(){a.drawLines(),a.drawBoxes()},a.zoomEvent=function(e){},a.touchStart=function(e){},a.touchMove=function(e){},a.touchEnd=function(e){},a.mouseDown=function(e){},a.mouseMove=function(e){},a.mouseUp=function(e){},a.dblClick=function(e){},a.contextMenu=function(e){},a.canvas=i.a.createRef(),a}return Object(l.a)(n,[{key:"createShaderProgram",value:function(){var e=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(e,"attribute vec2 coordinates;\n            void main(void) {\n      gl_Position = vec4(coordinates,0.0, 1.0);\n     }"),this.gl.compileShader(e);var t=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(t,"precision mediump float;\n            uniform vec4 u_color;\n            void main(void) {\n     gl_FragColor = u_color;\n    }"),this.gl.compileShader(t),this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,e),this.gl.attachShader(this.shaderProgram,t),this.gl.linkProgram(this.shaderProgram),this.gl.useProgram(this.shaderProgram)}},{key:"componentDidUpdate",value:function(){window.requestAnimationFrame(this.drawFrame)}},{key:"componentDidMount",value:function(){this.graph=this.props.edf;var e=window.devicePixelRatio||1;this.canvas.current.width=this.canvas.current.clientWidth*e,this.canvas.current.height=this.canvas.current.clientHeight*e;this.canvas.current.width;this.gl=this.canvas.current.getContext("webgl",{antialias:!0,transparent:!1}),this.createShaderProgram(),this.gl.clearColor(.5,.5,.5,.9),this.gl.enable(this.gl.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.canvas.current.width,this.canvas.current.height),window.requestAnimationFrame(this.drawFrame)}},{key:"render",value:function(){return Object(f.jsx)("canvas",{ref:this.canvas,style:{width:"100%",height:"100%"}})}}]),n}(a.Component),M=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this)).state={signalBoxSizing:[],sectionBoxSizing:[],signalBoxOrder:[],signalBoxMinBound:[],signalBoxMaxBound:[]},a.setSignalBoxSizing=function(e){a.props.edf.signalBoxSizing=e,a.setState({signalBoxSizing:e})},a.setSectionBoxSizing=function(e){a.setState({sectionBoxSizing:e})},a.getSignalBoxSizing=function(){return a.state.signalBoxSizing},a.swapSignalBoxOrder=function(e,t){var n=a.state.signalBoxSizing,i=a.state.signalBoxOrder,s=n[e];n[e]=n[t],n[t]=s,s=i[e],i[e]=i[t],i[t]=s,a.setState({signalBoxOrder:i,signalBoxSizing:n})},a.setSignalBoxMinBound=function(e,t){a.setState((function(n){var a=n.signalBoxMinBound.slice(0);return a[n.signalBoxOrder[e]]=n.signalBoxMinBound[n.signalBoxOrder[e]]+t,a[n.signalBoxOrder[e]]>=n.signalBoxMaxBound[n.signalBoxOrder[e]]?null:{signalBoxMinBound:a}}))},a.setSignalBoxMaxBound=function(e,t){a.setState((function(n){var a=n.signalBoxMaxBound.slice(0);return a[n.signalBoxOrder[e]]=n.signalBoxMaxBound[n.signalBoxOrder[e]]+t,a[n.signalBoxOrder[e]]<=n.signalBoxMinBound[n.signalBoxOrder[e]]?null:{signalBoxMaxBound:a}}))};for(var i=[],s=[],r=[],l=[],c=0;c<e.edf.numSignals;c++)i[c]=1,s[c]=c,r[c]=-10,l[c]=10;return a.state.signalBoxSizing=i,a.state.signalBoxOrder=s,a.state.signalBoxMaxBound=l,a.state.signalBoxMinBound=r,a}return Object(l.a)(n,[{key:"render",value:function(){for(var e,t,n,a,i=this,s=[],r=0;r<this.props.edf.numSignals;r++)s.push(Object(f.jsx)(_.a,{initialSize:this.state.signalBoxSizing[r],children:Object(f.jsx)(j,{position:r,color:(e=1-(r+1)/this.props.edf.numSignals,t=1-(r+1)/this.props.edf.numSignals/2,n=.5,a=1,e=Math.floor(225*e).toString(16),t=Math.floor(225*t).toString(16),n=Math.floor(225*n).toString(16),a=Math.floor(225*a).toString(16),(e=1===e.length?"0"+e:e)+(t=1===t.length?"0"+t:t)+(n=1===n.length?"0"+n:n)+(a=1===a.length?"0"+a:a)),signal:this.props.edf.signals[this.state.signalBoxOrder[r]],swapSignalBoxOrder:this.swapSignalBoxOrder,setSignalBoxMaxBound:this.setSignalBoxMaxBound,setSignalBoxMinBound:this.setSignalBoxMinBound,maxBound:this.state.signalBoxMaxBound[this.state.signalBoxOrder[r]],minBound:this.state.signalBoxMinBound[this.state.signalBoxOrder[r]]})}));return Object(f.jsxs)(v.a,{onChange:this.setSectionBoxSizing,split:"vertical",children:[Object(f.jsx)(_.a,{initialSize:this.state.sectionBoxSizing[0]?this.state.sectionBoxSizing[0]:10,children:Object(f.jsx)(v.a,{split:"horizontal",minSize:"50px",onChange:function(e){i.setSignalBoxSizing(e)},children:s})}),Object(f.jsx)(_.a,{initialSize:this.state.sectionBoxSizing[1]?this.state.sectionBoxSizing[1]:100,children:Object(f.jsx)(w,{dataRecords:this.props.dataRecords,signalBoxSizing:this.state.signalBoxSizing,signalBoxOrder:this.state.signalBoxOrder,edf:this.props.edf,signalBoxMinBound:this.state.signalBoxMinBound,signalBoxMaxBound:this.state.signalBoxMaxBound})}),Object(f.jsx)(_.a,{initialSize:this.state.sectionBoxSizing[2]?this.state.sectionBoxSizing[2]:10,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:"This panel is still a work in progress, it should hold various properties, configurable settings, as well as annotation features."}),Object(f.jsx)("h2",{children:"About:"}),Object(f.jsx)("b",{children:"Features:"}),Object(f.jsx)("br",{}),"The panels on the left can all be adjusted accordingly by pulling on their edges.",Object(f.jsx)("br",{}),"The maximum and minimum properties of the channels can be adjusted by selecting their displayed value and dragging up and down.",Object(f.jsx)("br",{}),"Other ways to manipulate these boundary properties include:",Object(f.jsx)("br",{}),'- Scrolling while the cursor is within the "description box" (box containing the name of the channel), which expands and contracts the signal vertically. ',Object(f.jsx)("br",{}),"- Dragging the name of the channel, which shifts the signal up and down.",Object(f.jsx)("br",{}),'The order of the channels can be changed by dragging the "handle" (icon with arrows pointing up and down) of one channel over another. This swaps the two channels.',Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"The top left corner contains a button that opens a side bar which contains more features; unimplemented as yet.",Object(f.jsx)("br",{}),"The two arrows at the top right are for moving between time frames; it is still a work in progress as well.",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("b",{children:"To be implemented:"}),Object(f.jsx)("br",{}),"- Zoom in/out",Object(f.jsx)("br",{}),"- Keyboard shortcuts to manipulate the value of the boundaries",Object(f.jsx)("br",{}),"- Input field to edit the boundary properties of the different channels",Object(f.jsx)("br",{}),"- Annotations",Object(f.jsx)("br",{}),"- Movement between pages of time frames",Object(f.jsx)("br",{}),"- File selection",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"Please suggest other features and ways to improve the current implementation!"]})})]})}}]),n}(a.Component),R=function e(t,n,a,i,s,r,l,c,d){Object(o.a)(this,e),this.version=0,this.patientID=0,this.recordingID=0,this.startDate="1/1/1970",this.startTime="09:30",this.numDataRecords=0,this.dataRecordDuration=0,this.numSignals=0,this.signals=[],this.version=t,this.patientID=n,this.recordingID=a,this.startDate=i,this.startTime=s,this.numDataRecords=r,this.dataRecordDuration=l,this.numSignals=c,this.signals=d},A=n(11),F=n.n(A),y=n(10),D=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:F.a.Background,children:[Object(f.jsx)(y.c,{className:F.a.Menu,onClick:this.props.sideBarToggle}),Object(f.jsx)("span",{className:F.a.Title,children:"EDF Web Viewer"}),Object(f.jsx)("span",{className:F.a.FileName,children:"Sine.edf"}),Object(f.jsxs)("span",{className:F.a.FrameNavigationButtonGroup,children:[Object(f.jsx)(y.a,{className:F.a.LeftFrameButton}),Object(f.jsx)(y.b,{className:F.a.RightFrameButton})]})]})}}]),n}(a.Component),N=(n(27),n(31)),T=n(32),k=n.n(T),L=function(){return Object(f.jsx)("div",{className:k.a.Background,children:Object(f.jsx)(N.Navigation,{activeItemId:"/management/members",onSelect:function(e){e.itemId},items:[{title:"Dashboard",itemId:"/dashboard",elemBefore:function(){return Object(f.jsx)(y.a,{name:"inbox"})}},{title:"Management",itemId:"/management",elemBefore:function(){return Object(f.jsx)(y.a,{name:"users"})},subNav:[{title:"Projects",itemId:"/management/projects",elemBefore:function(){return Object(f.jsx)(y.a,{name:"cloud-snow"})}},{title:"Members",itemId:"/management/members",elemBefore:function(){return Object(f.jsx)(y.a,{name:"coffee"})}}]},{title:"Another Item",itemId:"/another",subNav:[{title:"Teams",itemId:"/management/teams"}]}]})})},z=n(33),C=n.n(z),P=function(e){return Object(f.jsx)("div",{className:C.a.Background,onClick:e.onClick})},I=n(95),E=function e(){Object(o.a)(this,e),this.samples=[],this.samples=[],this.resolution=1},H=function e(){Object(o.a)(this,e),this.records=[],this.records=[]},U=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={sideBar:!1},e.sideBarToggle=function(){e.setState((function(e){return{sideBar:!e.sideBar}}))},e}return Object(l.a)(n,[{key:"render",value:function(){for(var e=[],t=0;t<12;t++){var n=new g;n.label="test"+t,n.numSamplesPerDataRecord=1e4,e.push(n)}for(var a=new H,i=0;i<12;i++){for(var s=new E,r=0;r<1e4;r++)s.samples.push(3*Math.sin(r/50));a.records.push(s)}var o={entering:{left:0},entered:{left:0},exiting:{left:-500},exited:{left:-500}},l=new R(0,3434,34343,"1/1/1970","3:30",10,2,12,e);return Object(f.jsxs)("div",{className:u.a.Background,children:[Object(f.jsx)(I.a,{in:this.state.sideBar,timeout:300,children:function(e){return Object(f.jsx)("div",{className:u.a.SideBar,style:o[e],children:Object(f.jsx)(L,{})})}}),this.state.sideBar?Object(f.jsx)(P,{onClick:this.sideBarToggle}):null,Object(f.jsxs)("div",{className:u.a.Navbar,children:[Object(f.jsx)(D,{sideBarToggle:this.sideBarToggle})," "]}),Object(f.jsxs)("div",{className:u.a.View,children:[Object(f.jsx)(M,{edf:l,dataRecords:a})," "]})]})}}]),n}(a.Component),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};r.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(U,{})}),document.getElementById("root")),V()}},[[92,1,2]]]);
//# sourceMappingURL=main.c9de6fe7.chunk.js.map