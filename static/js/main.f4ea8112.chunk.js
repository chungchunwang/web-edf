(this["webpackJsonpweb-edf"]=this["webpackJsonpweb-edf"]||[]).push([[0],{11:function(t,e,n){t.exports={Background:"Navbar_Background__t6HNZ",Menu:"Navbar_Menu__31JhJ",Title:"Navbar_Title__3XeUr",LeftFrameButton:"Navbar_LeftFrameButton__1eqXo",RightFrameButton:"Navbar_RightFrameButton__1Fq2i",FrameNavigationButtonGroup:"Navbar_FrameNavigationButtonGroup__3Jb6E",FileName:"Navbar_FileName__2waRy"}},14:function(t,e,n){t.exports={Background:"SignalHeader_Background__1zqVa",Center:"SignalHeader_Center__bPlrg",DragHandle:"SignalHeader_DragHandle__15Men",Label:"SignalHeader_Label__3lCgR",HighBoundLabel:"SignalHeader_HighBoundLabel__21VDD",LowBoundLabel:"SignalHeader_LowBoundLabel__iZWG4"}},16:function(t,e,n){t.exports={Background:"App_Background__14_hr",Navbar:"App_Navbar__26oD_",View:"App_View__1RCWD",SideBar:"App_SideBar__1lQ4Q"}},32:function(t,e,n){t.exports={Background:"SideBar_Background__t8yqE"}},33:function(t,e,n){t.exports={Background:"Shadow_Background__3arsa"}},38:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var a=n(2),i=n.n(a),s=n(13),r=n.n(s),o=(n(38),n(4)),l=n(7),c=n(9),d=n(8),g=function t(e,n,a,i,s,r,l,c,d){Object(o.a)(this,t),this.label="",this.transducerType="",this.physicalDimension=0,this.physicalMinimum=0,this.physicalMaximum=0,this.digitalMinimum=0,this.digitalMaximum=0,this.prefiltering="",this.numSamplesPerDataRecord=0,this.label=e,this.transducerType=n,this.physicalDimension=a,this.physicalMinimum=i,this.physicalMaximum=s,this.digitalMinimum=r,this.digitalMaximum=l,this.prefiltering=c,this.numSamplesPerDataRecord=d,this.maxBound=100,this.minBound=-100},u=n(16),h=n.n(u),p=n(14),B=n.n(p),x=n(17),m=n.n(x),f=n(28),b=n(1),S=function(t){Object(c.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={maxBoundLast:0,minBoundLast:0,shiftLast:0},a.dragStartHandler=function(t){t.dataTransfer.setData("text",a.props.position.toString())},a.dragOver=function(t){t.preventDefault()},a.drop=function(t){t.preventDefault();var e=t.dataTransfer.getData("text");a.props.swapSignalBoxOrder(a.props.position,parseInt(e)),console.log(e)},a.zoom=function(t){t.deltaY<0?(a.props.setSignalBoxMaxBound(a.props.position,-1),a.props.setSignalBoxMinBound(a.props.position,1)):(a.props.setSignalBoxMaxBound(a.props.position,1),a.props.setSignalBoxMinBound(a.props.position,-1))},a.maxBoundChange=function(t){var e=t-a.state.maxBoundLast;e<0?a.props.setSignalBoxMaxBound(a.props.position,1):e>0&&a.props.setSignalBoxMaxBound(a.props.position,-1),a.setState({maxBoundLast:t})},a.minBoundChange=function(t){var e=t-a.state.minBoundLast;e<0?a.props.setSignalBoxMinBound(a.props.position,1):e>0&&a.props.setSignalBoxMinBound(a.props.position,-1),a.setState({minBoundLast:t})},a.shift=function(t){var e=t-a.state.shiftLast;e<0?(a.props.setSignalBoxMinBound(a.props.position,-1),a.props.setSignalBoxMaxBound(a.props.position,-1)):e>0&&(a.props.setSignalBoxMinBound(a.props.position,1),a.props.setSignalBoxMaxBound(a.props.position,1)),a.setState({shiftLast:t})},a.background=i.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.background.current.addEventListener("wheel",this.zoom)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:B.a.Background,style:{backgroundColor:"#"+this.props.color},ref:this.background,onDragOver:this.dragOver,onDrop:this.drop,onScroll:this.onScroll,children:[Object(b.jsxs)("div",{className:B.a.Center,children:[Object(b.jsx)("div",{className:B.a.DragHandle,draggable:"true",onDragStart:this.dragStartHandler,children:Object(b.jsx)(f.a,{})}),Object(b.jsx)("div",{className:B.a.Label,children:Object(b.jsx)(m.a,{yAxis:!0,onChange:this.shift,disableReset:!0,children:this.props.signal.label})})]}),Object(b.jsx)(m.a,{yAxis:!0,onChange:this.maxBoundChange,disableReset:!0,children:Object(b.jsx)("span",{className:B.a.HighBoundLabel,children:this.props.maxBound})}),Object(b.jsxs)(m.a,{yAxis:!0,onChange:this.minBoundChange,disableReset:!0,children:[" ",Object(b.jsx)("span",{className:B.a.LowBoundLabel,children:this.props.minBound})]})]})}}]),n}(a.Component),j=n(19),v=n.n(j),O=n(15),_=n.n(O),M=function(t){Object(c.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this)).signalBoxWidth=200,a.drawBoxes=function(){for(var t=0;t<a.props.edf.numSignals;t++){var e=a.props.signalBoxSizing,n=[],i=0;for(var s in e)i+=parseInt(e[s]);var r=0,o=0,l=void 0;for(l=0;l<t;l++)r+=parseInt(e[l]);o=r,r=2*r/i,o=2*(o+=parseInt(e[l]))/i,n.push(-1),n.push(1-r),n.push(-1),n.push(1-o),n.push(1),n.push(1-r),n.push(1),n.push(1-o);var c=a.gl.createBuffer();a.gl.bindBuffer(a.gl.ARRAY_BUFFER,c),a.gl.bufferData(a.gl.ARRAY_BUFFER,new Float32Array(n),a.gl.STATIC_DRAW),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,null),a.gl.useProgram(a.shaderProgram),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,c);var d=a.gl.getAttribLocation(a.shaderProgram,"coordinates"),g=a.gl.getUniformLocation(a.shaderProgram,"u_color");a.gl.uniform4f(g,1-t/a.props.edf.numSignals,1-t/a.props.edf.numSignals/2,.5,1),a.gl.vertexAttribPointer(d,2,a.gl.FLOAT,!1,0,0),a.gl.enableVertexAttribArray(d),a.gl.drawArrays(a.gl.TRIANGLE_STRIP,0,4)}},a.drawLines=function(){for(var t=0;t<a.props.edf.numSignals;t++){var e=a.props.signalBoxSizing,n=0;for(var i in e)n+=parseInt(e[i]);var s=0,r=0,o=void 0;for(o=0;o<t;o++)s+=parseInt(e[o]);r=s,s=2*s/n,r=2*(r+=parseInt(e[o]))/n;for(var l=a.props.edf.signals[a.props.signalBoxOrder[t]].numSamplesPerDataRecord,c=[],d=Math.abs(r-s),g=a.props.signalBoxMaxBound[a.props.signalBoxOrder[t]],u=d/(g-a.props.signalBoxMinBound[a.props.signalBoxOrder[t]]),h=1-s-g*u,p=0;p<l;p++)c.push(p/l*2-1),c.push(a.props.dataRecords.records[t].samples[p]*u+h);var B=a.gl.createBuffer();a.gl.bindBuffer(a.gl.ARRAY_BUFFER,B),a.gl.bufferData(a.gl.ARRAY_BUFFER,new Float32Array(c),a.gl.STATIC_DRAW),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,null),a.gl.useProgram(a.shaderProgram),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,B);var x=a.gl.getAttribLocation(a.shaderProgram,"coordinates"),m=a.gl.getUniformLocation(a.shaderProgram,"u_color");a.gl.uniform4f(m,.35,.35,.35,1),a.gl.vertexAttribPointer(x,2,a.gl.FLOAT,!1,0,0),a.gl.enableVertexAttribArray(x),a.gl.drawArrays(a.gl.LINE_STRIP,0,l)}},a.drawFrame=function(){a.drawLines(),a.drawBoxes()},a.zoomEvent=function(t){},a.touchStart=function(t){},a.touchMove=function(t){},a.touchEnd=function(t){},a.mouseDown=function(t){},a.mouseMove=function(t){},a.mouseUp=function(t){},a.dblClick=function(t){},a.contextMenu=function(t){},a.canvas=i.a.createRef(),a}return Object(l.a)(n,[{key:"createShaderProgram",value:function(){var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"attribute vec2 coordinates;\n            void main(void) {\n      gl_Position = vec4(coordinates,0.0, 1.0);\n     }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"precision mediump float;\n            uniform vec4 u_color;\n            void main(void) {\n     gl_FragColor = u_color;\n    }"),this.gl.compileShader(e),this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.gl.useProgram(this.shaderProgram)}},{key:"componentDidUpdate",value:function(){window.requestAnimationFrame(this.drawFrame)}},{key:"componentDidMount",value:function(){this.graph=this.props.edf;var t=window.devicePixelRatio||1;this.canvas.current.width=this.canvas.current.clientWidth*t,this.canvas.current.height=this.canvas.current.clientHeight*t;this.canvas.current.width;this.gl=this.canvas.current.getContext("webgl",{antialias:!0,transparent:!1}),this.createShaderProgram(),this.gl.clearColor(.5,.5,.5,.9),this.gl.enable(this.gl.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.canvas.current.width,this.canvas.current.height),window.requestAnimationFrame(this.drawFrame)}},{key:"render",value:function(){return Object(b.jsx)("canvas",{ref:this.canvas,style:{width:"100%",height:"100%"}})}}]),n}(a.Component),R=function(t){Object(c.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(o.a)(this,n),(a=e.call(this)).state={signalBoxSizing:[],sectionBoxSizing:[],signalBoxOrder:[],signalBoxMinBound:[],signalBoxMaxBound:[]},a.setSignalBoxSizing=function(t){a.props.edf.signalBoxSizing=t,a.setState({signalBoxSizing:t})},a.setSectionBoxSizing=function(t){a.setState({sectionBoxSizing:t})},a.getSignalBoxSizing=function(){return a.state.signalBoxSizing},a.swapSignalBoxOrder=function(t,e){var n=a.state.signalBoxSizing,i=a.state.signalBoxOrder,s=n[t];n[t]=n[e],n[e]=s,s=i[t],i[t]=i[e],i[e]=s,a.setState({signalBoxOrder:i,signalBoxSizing:n})},a.setSignalBoxMinBound=function(t,e){a.setState((function(n){var a=n.signalBoxMinBound.slice(0);return a[n.signalBoxOrder[t]]=n.signalBoxMinBound[n.signalBoxOrder[t]]+e,a[n.signalBoxOrder[t]]>=n.signalBoxMaxBound[n.signalBoxOrder[t]]?null:{signalBoxMinBound:a}}))},a.setSignalBoxMaxBound=function(t,e){a.setState((function(n){var a=n.signalBoxMaxBound.slice(0);return a[n.signalBoxOrder[t]]=n.signalBoxMaxBound[n.signalBoxOrder[t]]+e,a[n.signalBoxOrder[t]]<=n.signalBoxMinBound[n.signalBoxOrder[t]]?null:{signalBoxMaxBound:a}}))};for(var i=[],s=[],r=[],l=[],c=0;c<t.edf.numSignals;c++)i[c]=1,s[c]=c,r[c]=-10,l[c]=10;return a.state.signalBoxSizing=i,a.state.signalBoxOrder=s,a.state.signalBoxMaxBound=l,a.state.signalBoxMinBound=r,a}return Object(l.a)(n,[{key:"render",value:function(){for(var t,e,n,a,i=this,s=[],r=0;r<this.props.edf.numSignals;r++)s.push(Object(b.jsx)(_.a,{initialSize:this.state.signalBoxSizing[r],children:Object(b.jsx)(S,{position:r,color:(t=1-(r+1)/this.props.edf.numSignals,e=1-(r+1)/this.props.edf.numSignals/2,n=.5,a=1,t=Math.floor(225*t).toString(16),e=Math.floor(225*e).toString(16),n=Math.floor(225*n).toString(16),a=Math.floor(225*a).toString(16),(t=1===t.length?"0"+t:t)+(e=1===e.length?"0"+e:e)+(n=1===n.length?"0"+n:n)+(a=1===a.length?"0"+a:a)),signal:this.props.edf.signals[this.state.signalBoxOrder[r]],swapSignalBoxOrder:this.swapSignalBoxOrder,setSignalBoxMaxBound:this.setSignalBoxMaxBound,setSignalBoxMinBound:this.setSignalBoxMinBound,maxBound:this.state.signalBoxMaxBound[this.state.signalBoxOrder[r]],minBound:this.state.signalBoxMinBound[this.state.signalBoxOrder[r]]})}));return Object(b.jsxs)(v.a,{onChange:this.setSectionBoxSizing,split:"vertical",children:[Object(b.jsx)(_.a,{initialSize:this.state.sectionBoxSizing[0]?this.state.sectionBoxSizing[0]:10,children:Object(b.jsx)(v.a,{split:"horizontal",minSize:"50px",onChange:function(t){i.setSignalBoxSizing(t)},children:s})}),Object(b.jsx)(_.a,{initialSize:this.state.sectionBoxSizing[1]?this.state.sectionBoxSizing[1]:100,children:Object(b.jsx)(M,{dataRecords:this.props.dataRecords,signalBoxSizing:this.state.signalBoxSizing,signalBoxOrder:this.state.signalBoxOrder,edf:this.props.edf,signalBoxMinBound:this.state.signalBoxMinBound,signalBoxMaxBound:this.state.signalBoxMaxBound})}),Object(b.jsx)(_.a,{initialSize:this.state.sectionBoxSizing[2]?this.state.sectionBoxSizing[2]:10,children:Object(b.jsx)("div",{children:"Info"})})]})}}]),n}(a.Component),A=function t(e,n,a,i,s,r,l,c,d){Object(o.a)(this,t),this.version=0,this.patientID=0,this.recordingID=0,this.startDate="1/1/1970",this.startTime="09:30",this.numDataRecords=0,this.dataRecordDuration=0,this.numSignals=0,this.signals=[],this.version=e,this.patientID=n,this.recordingID=a,this.startDate=i,this.startTime=s,this.numDataRecords=r,this.dataRecordDuration=l,this.numSignals=c,this.signals=d},w=n(11),F=n.n(w),D=n(10),N=function(t){Object(c.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:F.a.Background,children:[Object(b.jsx)(D.c,{className:F.a.Menu,onClick:this.props.sideBarToggle}),Object(b.jsx)("span",{className:F.a.Title,children:"EDF Web Viewer"}),Object(b.jsx)("span",{className:F.a.FileName,children:"Sine.edf"}),Object(b.jsxs)("span",{className:F.a.FrameNavigationButtonGroup,children:[Object(b.jsx)(D.a,{className:F.a.LeftFrameButton}),Object(b.jsx)(D.b,{className:F.a.RightFrameButton})]})]})}}]),n}(a.Component),L=(n(27),n(31)),k=n(32),y=n.n(k),z=function(){return Object(b.jsx)("div",{className:y.a.Background,children:Object(b.jsx)(L.Navigation,{activeItemId:"/management/members",onSelect:function(t){t.itemId},items:[{title:"Dashboard",itemId:"/dashboard",elemBefore:function(){return Object(b.jsx)(D.a,{name:"inbox"})}},{title:"Management",itemId:"/management",elemBefore:function(){return Object(b.jsx)(D.a,{name:"users"})},subNav:[{title:"Projects",itemId:"/management/projects",elemBefore:function(){return Object(b.jsx)(D.a,{name:"cloud-snow"})}},{title:"Members",itemId:"/management/members",elemBefore:function(){return Object(b.jsx)(D.a,{name:"coffee"})}}]},{title:"Another Item",itemId:"/another",subNav:[{title:"Teams",itemId:"/management/teams"}]}]})})},C=n(33),P=n.n(C),T=function(t){return Object(b.jsx)("div",{className:P.a.Background,onClick:t.onClick})},I=n(95),E=function t(){Object(o.a)(this,t),this.samples=[],this.samples=[],this.resolution=1},H=function t(){Object(o.a)(this,t),this.records=[],this.records=[]},U=function(t){Object(c.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={sideBar:!1},t.sideBarToggle=function(){t.setState((function(t){return{sideBar:!t.sideBar}}))},t}return Object(l.a)(n,[{key:"render",value:function(){for(var t=[],e=0;e<12;e++){var n=new g;n.label="test"+e,n.numSamplesPerDataRecord=1e4,t.push(n)}for(var a=new H,i=0;i<12;i++){for(var s=new E,r=0;r<1e4;r++)s.samples.push(3*Math.sin(r/50));a.records.push(s)}var o={entering:{left:0},entered:{left:0},exiting:{left:-500},exited:{left:-500}},l=new A(0,3434,34343,"1/1/1970","3:30",10,2,12,t);return Object(b.jsxs)("div",{className:h.a.Background,children:[Object(b.jsx)(I.a,{in:this.state.sideBar,timeout:300,children:function(t){return Object(b.jsx)("div",{className:h.a.SideBar,style:o[t],children:Object(b.jsx)(z,{})})}}),this.state.sideBar?Object(b.jsx)(T,{onClick:this.sideBarToggle}):null,Object(b.jsxs)("div",{className:h.a.Navbar,children:[Object(b.jsx)(N,{sideBarToggle:this.sideBarToggle})," "]}),Object(b.jsxs)("div",{className:h.a.View,children:[Object(b.jsx)(R,{edf:l,dataRecords:a})," "]})]})}}]),n}(a.Component),V=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),s(t),r(t)}))};r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root")),V()}},[[92,1,2]]]);
//# sourceMappingURL=main.f4ea8112.chunk.js.map